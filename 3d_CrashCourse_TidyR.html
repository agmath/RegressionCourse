<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.43">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-08-06">

<title>Enter the Tidyverse: An Introduction to Tidy Data Analysis in R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="3d_CrashCourse_TidyR_files/libs/clipboard/clipboard.min.js"></script>
<script src="3d_CrashCourse_TidyR_files/libs/quarto-html/quarto.js"></script>
<script src="3d_CrashCourse_TidyR_files/libs/quarto-html/popper.min.js"></script>
<script src="3d_CrashCourse_TidyR_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="3d_CrashCourse_TidyR_files/libs/quarto-html/anchor.min.js"></script>
<link href="3d_CrashCourse_TidyR_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="3d_CrashCourse_TidyR_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="3d_CrashCourse_TidyR_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="3d_CrashCourse_TidyR_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="3d_CrashCourse_TidyR_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script src="3d_CrashCourse_TidyR_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="3d_CrashCourse_TidyR_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives">Objectives</a></li>
  <li><a href="#installing-and-loading-packages" id="toc-installing-and-loading-packages" class="nav-link" data-scroll-target="#installing-and-loading-packages">Installing and Loading Packages</a></li>
  <li><a href="#loading-data" id="toc-loading-data" class="nav-link" data-scroll-target="#loading-data">Loading Data</a></li>
  <li><a href="#viewing-data" id="toc-viewing-data" class="nav-link" data-scroll-target="#viewing-data">Viewing Data</a></li>
  <li><a href="#manipulating-data" id="toc-manipulating-data" class="nav-link" data-scroll-target="#manipulating-data">Manipulating Data</a>
  <ul class="collapse">
  <li><a href="#pipes" id="toc-pipes" class="nav-link" data-scroll-target="#pipes">Pipes <code>%&gt;%</code></a></li>
  <li><a href="#restricting-data" id="toc-restricting-data" class="nav-link" data-scroll-target="#restricting-data">Restricting Data</a></li>
  <li><a href="#summarizing-data" id="toc-summarizing-data" class="nav-link" data-scroll-target="#summarizing-data">Summarizing Data</a></li>
  <li><a href="#transforming-data" id="toc-transforming-data" class="nav-link" data-scroll-target="#transforming-data">Transforming Data</a></li>
  </ul></li>
  <li><a href="#final-thoughts" id="toc-final-thoughts" class="nav-link" data-scroll-target="#final-thoughts">Final Thoughts</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="3d_CrashCourse_TidyR.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Enter the Tidyverse: An Introduction to Tidy Data Analysis in R</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 6, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="objectives" class="level2">
<h2 class="anchored" data-anchor-id="objectives">Objectives</h2>
<p>This notebook addresses the following items.</p>
<ul>
<li>How do I install and load packages in R? In particular we’ll work with the <code>tidyverse</code>.</li>
<li>How do I read data into R from both local and remote sources?</li>
<li>How do I interact with, and manipulate, data using the tools and principles of the <code>tidyverse</code>?</li>
</ul>
</section>
<section id="installing-and-loading-packages" class="level2">
<h2 class="anchored" data-anchor-id="installing-and-loading-packages">Installing and Loading Packages</h2>
<p>We can install R packages using the command <code>install.packages("PACKAGE_NAME")</code>. Once packages are installed, we can load them into an R Session by running <code>library(PACKAGE_NAME)</code>. While packages only need to be <em>installed</em> once, they must be loaded in each R Session you intend to use them in (<strong>note:</strong> an R Session begins when R/RStudio are opened and ends when they are closed or terminated). We can install and load the <code>tidyverse</code> by running the code below:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"tidyverse"</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>Open RStudio and run these commands in the Console pane (left/lower-left). We’ll be using the <code>kableExtra</code> and <code>tidymodels</code> “packages” in our course – install both of these packages as well. Load the <code>kableExtra</code> package since we’ll be using it here.</li>
</ol>
</section>
<section id="loading-data" class="level2">
<h2 class="anchored" data-anchor-id="loading-data">Loading Data</h2>
<p>Now that you have the <code>tidyverse</code> loaded, the next thing we’ll need is actual data to manipulate. The <code>tidyverse</code> comes with a few standard data sets for practicing with, but we’ll be much more interested in working with our own data which we’ll either find locally (stored on your own computer) or remotely (accessed via a web URL). The <code>tidyverse</code> includes several functions for reading data in a variety of formats:</p>
<ul>
<li><code>read_csv("PATH_TO_FILE")</code> can be used to read data from a comma separated values (csv) file.</li>
<li><code>read_delim("PATH_TO_FILE", delim = "DELIMITER")</code> is a more general version of the <code>read_csv()</code> function – we can use this to read text files whose delimiter is something other than a comma. Common delimiters are the tab (<code>\t</code>) or space (<code>\s</code>).</li>
<li><code>read_excel("PATH_TO_FILE", sheet = "SHEET_NAME")</code> can be used to read data from a particular sheet within an xls or xlsx file.</li>
</ul>
<p>The following examples show how we can read a variety of files into an R Session.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Read the MAT241 sheet from the grades.xls file in </span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="co">#the Spring 2021 folder on my computer's desktop</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>grades <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"C:/Users/agilb/Desktop/Spring 2021/grades.xls"</span>, <span class="at">sheet =</span> <span class="st">"MAT241"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Read in data from a csv file of Tate Gallery Artists housed </span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="co">#in a public github repository on the web</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>tate_artists <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"https://github.com/tategallery/collection/raw/master/artist_data.csv"</span>)</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Read in data from a csv file of Tate Gallery Artworks housed</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co">#in a public github repository on the web</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">#*Note* that read_csv() would have worked just fine here too</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>tate_works <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-01-12/artwork.csv"</span>, <span class="at">delim =</span> <span class="st">","</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="viewing-data" class="level2">
<h2 class="anchored" data-anchor-id="viewing-data">Viewing Data</h2>
<p>Now that we’ve got data, the first thing we should do is look at it. There are a few really handy R functions for <em>getting a feel</em> for the data you have access to. The <code>View()</code>, <code>head()</code>, <code>tail()</code>, and <code>glimpse()</code> functions are four that are really commonly used. For the remainder of this notebook we’ll use a data frame called <code>mpg</code> which is built into the <code>tidyverse</code>.</p>
<ul>
<li><p>Running <code>View(mpg)</code> will open a file viewer which allows you to navigate the data frame in a familiar spreadsheet format.</p>
<ul>
<li>Try to avoid this – especially with large data frames.</li>
</ul></li>
<li><p>Using <code>head(mpg)</code> and <code>tail(mpg)</code> give us a convenient method for looking at the first six and last six rows of a data frame, respectively. This is typically enough to give us an idea of the type of data we are working with. Running both of these functions can also make us aware of potential inconsistencies in data collection.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mpg) <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">displ</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cyl</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">trans</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drv</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">hwy</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fl</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">manual(m6)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">auto(av)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
</tbody>
</table>


</div>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(mpg) <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">displ</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cyl</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">trans</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drv</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">hwy</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fl</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">volkswagen</td>
<td style="text-align: left;">passat</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">midsize</td>
</tr>
<tr class="even">
<td style="text-align: left;">volkswagen</td>
<td style="text-align: left;">passat</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">auto(s6)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">28</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">midsize</td>
</tr>
<tr class="odd">
<td style="text-align: left;">volkswagen</td>
<td style="text-align: left;">passat</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">manual(m6)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">midsize</td>
</tr>
<tr class="even">
<td style="text-align: left;">volkswagen</td>
<td style="text-align: left;">passat</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">midsize</td>
</tr>
<tr class="odd">
<td style="text-align: left;">volkswagen</td>
<td style="text-align: left;">passat</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">midsize</td>
</tr>
<tr class="even">
<td style="text-align: left;">volkswagen</td>
<td style="text-align: left;">passat</td>
<td style="text-align: right;">3.6</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">auto(s6)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">midsize</td>
</tr>
</tbody>
</table>


</div>
</div>
<ul>
<li>Note that the <code>kable() %&gt;% kable_styling()</code> commands are used to produce visually appealing tables in our html output – they don’t actually do anything to transform our data. You are encouraged (though not required) to use these lines when you want to print out tabular output. You can see what the output looks like without using <code>kableExtra</code> below. I’ll continue to utilize <code>kableExtra</code> throughout our course.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
  manufacturer model displ  year   cyl trans      drv     cty   hwy fl    class 
  &lt;chr&gt;        &lt;chr&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
1 audi         a4      1.8  1999     4 auto(l5)   f        18    29 p     compa…
2 audi         a4      1.8  1999     4 manual(m5) f        21    29 p     compa…
3 audi         a4      2    2008     4 manual(m6) f        20    31 p     compa…
4 audi         a4      2    2008     4 auto(av)   f        21    30 p     compa…
5 audi         a4      2.8  1999     6 auto(l5)   f        16    26 p     compa…
6 audi         a4      2.8  1999     6 manual(m5) f        18    26 p     compa…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 11
  manufacturer model  displ  year   cyl trans      drv     cty   hwy fl    class
  &lt;chr&gt;        &lt;chr&gt;  &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;      &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
1 volkswagen   passat   1.8  1999     4 auto(l5)   f        18    29 p     mids…
2 volkswagen   passat   2    2008     4 auto(s6)   f        19    28 p     mids…
3 volkswagen   passat   2    2008     4 manual(m6) f        21    29 p     mids…
4 volkswagen   passat   2.8  1999     6 auto(l5)   f        16    26 p     mids…
5 volkswagen   passat   2.8  1999     6 manual(m5) f        18    26 p     mids…
6 volkswagen   passat   3.6  2008     6 auto(s6)   f        17    26 p     mids…</code></pre>
</div>
</div></li>
<li><p>Running <code>glimpse(mpg)</code> provides us with a bit more technical information about how R is interpreting the columns of the <code>mpg</code> data frame. Knowing how R is interpreting our variables (columns) is important because certain operations are possible with numerical data but are not possible with categorical data, and vice-versa. Common data types in R are <code>chr</code>/<code>fct</code> (categorical data) and <code>num</code>/<code>dbl</code>/<code>int</code> (numerical data).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(mpg)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 234
Columns: 11
$ manufacturer &lt;chr&gt; "audi", "audi", "audi", "audi", "audi", "audi", "audi", "…
$ model        &lt;chr&gt; "a4", "a4", "a4", "a4", "a4", "a4", "a4", "a4 quattro", "…
$ displ        &lt;dbl&gt; 1.8, 1.8, 2.0, 2.0, 2.8, 2.8, 3.1, 1.8, 1.8, 2.0, 2.0, 2.…
$ year         &lt;int&gt; 1999, 1999, 2008, 2008, 1999, 1999, 2008, 1999, 1999, 200…
$ cyl          &lt;int&gt; 4, 4, 4, 4, 6, 6, 6, 4, 4, 4, 4, 6, 6, 6, 6, 6, 6, 8, 8, …
$ trans        &lt;chr&gt; "auto(l5)", "manual(m5)", "manual(m6)", "auto(av)", "auto…
$ drv          &lt;chr&gt; "f", "f", "f", "f", "f", "f", "f", "4", "4", "4", "4", "4…
$ cty          &lt;int&gt; 18, 21, 20, 21, 16, 18, 18, 18, 16, 20, 19, 15, 17, 17, 1…
$ hwy          &lt;int&gt; 29, 29, 31, 30, 26, 26, 27, 26, 25, 28, 27, 25, 25, 25, 2…
$ fl           &lt;chr&gt; "p", "p", "p", "p", "p", "p", "p", "p", "p", "p", "p", "p…
$ class        &lt;chr&gt; "compact", "compact", "compact", "compact", "compact", "c…</code></pre>
</div>
</div></li>
</ul>
</section>
<section id="manipulating-data" class="level2">
<h2 class="anchored" data-anchor-id="manipulating-data">Manipulating Data</h2>
<p>Now that we know how to load and view our data, let’s talk about manipulating it. We can restrict the data we are working with, produce summaries of the data, transform the data, and more.</p>
<section id="pipes" class="level3">
<h3 class="anchored" data-anchor-id="pipes">Pipes <code>%&gt;%</code></h3>
<p>Pipes are a functionality that is included in a package that is part of <code>tidyverse</code> library. At first, the syntax may seem a bit strange, but pipes allow you to easily manipulate data without having to rename and save the dataset along the way. I strongly encourage you get used to working with pipes! In the previous section we saw how to use R’s <code>head()</code> function to look at the first six rows of the dataset. Here’s how to achieve the same outcome with the use of the pipe (<code>%&gt;%</code>) operator.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">displ</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cyl</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">trans</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drv</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">hwy</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fl</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">manual(m6)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2.0</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">auto(av)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>You can read the code above as saying “take the <code>mpg</code> dataset, and plug it into the <code>head()</code> function”. Putting <code>head()</code> indented on a new line is not necessary for the code to work, but it does make the code easier to read. This new method of asking for the <code>head()</code> of the dataset may seem silly and inefficient, but the real magic of the pipe is that it allows us to chain operations together in a way that mimics the way humans think about instructions. We’ll see this in action as we get exposure to more data manipulation tools below.</p>
</section>
<section id="restricting-data" class="level3">
<h3 class="anchored" data-anchor-id="restricting-data">Restricting Data</h3>
<p>The most common methods for restricting data deal with filtering out rows or columns so that we are only working with a subset of our original data set.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Filtering Rows (<code>filter()</code>)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Selecting Columns (<code>select()</code>)</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">Combining the Two</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Sometimes we are not interested in all of the observations in a particular dataset, but only those satisfying certain criteria. For example, maybe we only want to see vehicles falling into the class of <em>subcompact</em> cars. The <code>filter()</code> function will allow us to get rid of all other classes of vehicle.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(class <span class="sc">==</span> <span class="st">"subcompact"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">displ</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cyl</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">trans</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drv</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">hwy</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fl</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">ford</td>
<td style="text-align: left;">mustang</td>
<td style="text-align: right;">3.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">r</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">r</td>
<td style="text-align: left;">subcompact</td>
</tr>
<tr class="even">
<td style="text-align: left;">ford</td>
<td style="text-align: left;">mustang</td>
<td style="text-align: right;">3.8</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">auto(l4)</td>
<td style="text-align: left;">r</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">25</td>
<td style="text-align: left;">r</td>
<td style="text-align: left;">subcompact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ford</td>
<td style="text-align: left;">mustang</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">r</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">r</td>
<td style="text-align: left;">subcompact</td>
</tr>
<tr class="even">
<td style="text-align: left;">ford</td>
<td style="text-align: left;">mustang</td>
<td style="text-align: right;">4.0</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">6</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">r</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">24</td>
<td style="text-align: left;">r</td>
<td style="text-align: left;">subcompact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ford</td>
<td style="text-align: left;">mustang</td>
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">auto(l4)</td>
<td style="text-align: left;">r</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">21</td>
<td style="text-align: left;">r</td>
<td style="text-align: left;">subcompact</td>
</tr>
<tr class="even">
<td style="text-align: left;">ford</td>
<td style="text-align: left;">mustang</td>
<td style="text-align: right;">4.6</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">8</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">r</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">22</td>
<td style="text-align: left;">r</td>
<td style="text-align: left;">subcompact</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>We can also use more complex conditions on which rows to see using <em>and</em> (<code>&amp;</code>) and <em>or</em> (<code>|</code>) statements. Maybe we want to see only those vehicles in the made by <code>subaru</code> or getting at least a 35 highway mile per gallon rating (<code>hwy</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(manufacturer <span class="sc">==</span> <span class="st">"subaru"</span> <span class="sc">|</span> hwy <span class="sc">&gt;=</span> <span class="dv">35</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()  <span class="sc">%&gt;%</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">displ</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cyl</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">trans</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drv</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">hwy</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fl</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">honda</td>
<td style="text-align: left;">civic</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">36</td>
<td style="text-align: left;">r</td>
<td style="text-align: left;">subcompact</td>
</tr>
<tr class="even">
<td style="text-align: left;">honda</td>
<td style="text-align: left;">civic</td>
<td style="text-align: right;">1.8</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">24</td>
<td style="text-align: right;">36</td>
<td style="text-align: left;">c</td>
<td style="text-align: left;">subcompact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">subaru</td>
<td style="text-align: left;">forester awd</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">4</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">25</td>
<td style="text-align: left;">r</td>
<td style="text-align: left;">suv</td>
</tr>
<tr class="even">
<td style="text-align: left;">subaru</td>
<td style="text-align: left;">forester awd</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">auto(l4)</td>
<td style="text-align: left;">4</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">24</td>
<td style="text-align: left;">r</td>
<td style="text-align: left;">suv</td>
</tr>
<tr class="odd">
<td style="text-align: left;">subaru</td>
<td style="text-align: left;">forester awd</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">4</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">27</td>
<td style="text-align: left;">r</td>
<td style="text-align: left;">suv</td>
</tr>
<tr class="even">
<td style="text-align: left;">subaru</td>
<td style="text-align: left;">forester awd</td>
<td style="text-align: right;">2.5</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">4</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">4</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">25</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">suv</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>Similarly to the way we can filter rows, we can select only those columns we are interested in. We can pass the names of the columns we are interested in to R’s <code>select()</code> function so that we only see those selected columns returned.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(manufacturer, model, year, cty, hwy, class) <span class="sc">%&gt;%</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()  <span class="sc">%&gt;%</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">hwy</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1999</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">compact</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>We can also select all columns <em>except</em> certain ones by preceding the column name with a <code>-</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>displ,<span class="sc">-</span>cyl) <span class="sc">%&gt;%</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()  <span class="sc">%&gt;%</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">trans</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">drv</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">hwy</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">fl</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2008</td>
<td style="text-align: left;">manual(m6)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2008</td>
<td style="text-align: left;">auto(av)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">auto(l5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">manual(m5)</td>
<td style="text-align: left;">f</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">p</td>
<td style="text-align: left;">compact</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>The <code>select()</code> function is also useful for changing the order of the columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(cty, hwy, manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">hwy</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">18</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">audi</td>
</tr>
<tr class="even">
<td style="text-align: right;">21</td>
<td style="text-align: right;">29</td>
<td style="text-align: left;">audi</td>
</tr>
<tr class="odd">
<td style="text-align: right;">20</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">audi</td>
</tr>
<tr class="even">
<td style="text-align: right;">21</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">audi</td>
</tr>
<tr class="odd">
<td style="text-align: right;">16</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">audi</td>
</tr>
<tr class="even">
<td style="text-align: right;">18</td>
<td style="text-align: right;">26</td>
<td style="text-align: left;">audi</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>We can combine <code>filter()</code> and <code>select()</code> through the pipe as well. For any pipe, the result of the “upstream” code (the code before the pipe) is passed into the function that follows the pipe.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2005</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(manufacturer, model, year, cty, hwy, class) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">hwy</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">class</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">31</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">30</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">27</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4 quattro</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">28</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4 quattro</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">19</td>
<td style="text-align: right;">27</td>
<td style="text-align: left;">compact</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4 quattro</td>
<td style="text-align: right;">2008</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">25</td>
<td style="text-align: left;">compact</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
</div>
</div>
<p><strong>A Note on Pipes:</strong> The advantage to the pipe operator is probably pretty clear by now. The code we just wrote says <em>take the <code>mpg</code> data set, and then filter it so that we only see cars manufactured since 2005, and then show me only the few columns I am interested in, and then just let me see the first six rows for now</em>. The alternative to this would be writing code that looks a lot less readable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(<span class="fu">select</span>(<span class="fu">filter</span>(mpg, year <span class="sc">&gt;=</span> <span class="dv">2005</span>), manufacturer, model, year, cty, hwy, class))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="summarizing-data" class="level3">
<h3 class="anchored" data-anchor-id="summarizing-data">Summarizing Data</h3>
<p>There are lots of ways we can summarize our data. We can provide simple counts, compute averages, even build out our own summary functions.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Summarizing Categorical Data with Counts</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Summarizing Numerical Data</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>We can start with a simple question like, <em>how many cars from each manufacturer are contained in this dataset?</em> To answer this, we simply pipe the <code>mpg</code> data frame into the <code>count()</code> function, identifying the <code>manufacturer</code> column as the column we wish to count.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: right;">18</td>
</tr>
<tr class="even">
<td style="text-align: left;">chevrolet</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dodge</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="even">
<td style="text-align: left;">ford</td>
<td style="text-align: right;">25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">honda</td>
<td style="text-align: right;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">hyundai</td>
<td style="text-align: right;">14</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>The counts are displayed in alphabetical order by manufacturer. We might be interested in the most well-represented manufacturers. We’ll do this with <code>arrange()</code> – we can pass this function the argument <code>desc(n)</code> to say that we want to arrange by our new count column in descending order, and let’s ask for the top 10 rows instead of the top 6.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">dodge</td>
<td style="text-align: right;">37</td>
</tr>
<tr class="even">
<td style="text-align: left;">toyota</td>
<td style="text-align: right;">34</td>
</tr>
<tr class="odd">
<td style="text-align: left;">volkswagen</td>
<td style="text-align: right;">27</td>
</tr>
<tr class="even">
<td style="text-align: left;">ford</td>
<td style="text-align: right;">25</td>
</tr>
<tr class="odd">
<td style="text-align: left;">chevrolet</td>
<td style="text-align: right;">19</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: right;">18</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hyundai</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="even">
<td style="text-align: left;">subaru</td>
<td style="text-align: right;">14</td>
</tr>
<tr class="odd">
<td style="text-align: left;">nissan</td>
<td style="text-align: right;">13</td>
</tr>
<tr class="even">
<td style="text-align: left;">honda</td>
<td style="text-align: right;">9</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Let’s say we wanted to know how many different models of car each manufacturer has released since the year 2000. This is a more complicated question. We would first need to filter the data so that we are only considering cars manufactured since the year 2000. Then we would subset to include only the <code>manufacturer</code> and <code>model</code> columns. There are lots of duplicates here, so we would want to remove them with a function called <code>distinct()</code>, and then finally we could count occurrences within each <code>manufacturer</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&gt;=</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(manufacturer, model) <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(manufacturer) <span class="sc">%&gt;%</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">toyota</td>
<td style="text-align: right;">6</td>
</tr>
<tr class="even">
<td style="text-align: left;">chevrolet</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dodge</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">ford</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">volkswagen</td>
<td style="text-align: right;">4</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: right;">3</td>
</tr>
</tbody>
</table>


</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>Summarizing categorical data is most often done with counts, but we’ve got many more choices when we are working with numerical data. We have several measures of center or spread that we could choose from – we could even define our own metrics. Let’s say we wanted to know the median highway mile per gallon rating across all vehicles in our dataset. We’ll need the help of R’s <code>summarize()</code> function as well as the <code>median()</code> function for this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">median_hwy =</span> <span class="fu">median</span>(hwy)) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">median_hwy</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">24</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>With the use of <code>summarize()</code> we can get multiple summaries at once. Let’s compute the mean and standard deviation for both the highway and city mile per gallon ratings across all of the vehicles in our data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">std_deviation_hwy =</span> <span class="fu">sd</span>(hwy), <span class="at">mean_cty =</span> <span class="fu">mean</span>(cty), <span class="at">std_deviation_cty =</span> <span class="fu">sd</span>(cty)) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_hwy</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std_deviation_hwy</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std_deviation_cty</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">23.44017</td>
<td style="text-align: right;">5.954643</td>
<td style="text-align: right;">16.85897</td>
<td style="text-align: right;">4.255946</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>It might be useful if we could get grouped summary statistics. Let’s use <code>group_by()</code> to see how these measures vary across the different vehicle classes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(class) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">std_deviation_hwy =</span> <span class="fu">sd</span>(hwy), <span class="at">mean_cty =</span> <span class="fu">mean</span>(cty), <span class="at">std_deviation_cty =</span> <span class="fu">sd</span>(cty)) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">class</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_hwy</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std_deviation_hwy</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std_deviation_cty</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">2seater</td>
<td style="text-align: right;">24.80000</td>
<td style="text-align: right;">1.303840</td>
<td style="text-align: right;">15.40000</td>
<td style="text-align: right;">0.5477226</td>
</tr>
<tr class="even">
<td style="text-align: left;">compact</td>
<td style="text-align: right;">28.29787</td>
<td style="text-align: right;">3.781620</td>
<td style="text-align: right;">20.12766</td>
<td style="text-align: right;">3.3854999</td>
</tr>
<tr class="odd">
<td style="text-align: left;">midsize</td>
<td style="text-align: right;">27.29268</td>
<td style="text-align: right;">2.135930</td>
<td style="text-align: right;">18.75610</td>
<td style="text-align: right;">1.9465416</td>
</tr>
<tr class="even">
<td style="text-align: left;">minivan</td>
<td style="text-align: right;">22.36364</td>
<td style="text-align: right;">2.062655</td>
<td style="text-align: right;">15.81818</td>
<td style="text-align: right;">1.8340219</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pickup</td>
<td style="text-align: right;">16.87879</td>
<td style="text-align: right;">2.274280</td>
<td style="text-align: right;">13.00000</td>
<td style="text-align: right;">2.0463382</td>
</tr>
<tr class="even">
<td style="text-align: left;">subcompact</td>
<td style="text-align: right;">28.14286</td>
<td style="text-align: right;">5.375012</td>
<td style="text-align: right;">20.37143</td>
<td style="text-align: right;">4.6023377</td>
</tr>
<tr class="odd">
<td style="text-align: left;">suv</td>
<td style="text-align: right;">18.12903</td>
<td style="text-align: right;">2.977973</td>
<td style="text-align: right;">13.50000</td>
<td style="text-align: right;">2.4208791</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>Let’s arrange the result here by mean highway mile per gallon rating in the default ascending order.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(class) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_hwy =</span> <span class="fu">mean</span>(hwy), <span class="at">std_deviation_hwy =</span> <span class="fu">sd</span>(hwy), <span class="at">mean_cty =</span> <span class="fu">mean</span>(cty), <span class="at">std_deviation_cty =</span> <span class="fu">sd</span>(cty)) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(mean_hwy) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">class</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_hwy</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std_deviation_hwy</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mean_cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">std_deviation_cty</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">pickup</td>
<td style="text-align: right;">16.87879</td>
<td style="text-align: right;">2.274280</td>
<td style="text-align: right;">13.00000</td>
<td style="text-align: right;">2.0463382</td>
</tr>
<tr class="even">
<td style="text-align: left;">suv</td>
<td style="text-align: right;">18.12903</td>
<td style="text-align: right;">2.977973</td>
<td style="text-align: right;">13.50000</td>
<td style="text-align: right;">2.4208791</td>
</tr>
<tr class="odd">
<td style="text-align: left;">minivan</td>
<td style="text-align: right;">22.36364</td>
<td style="text-align: right;">2.062655</td>
<td style="text-align: right;">15.81818</td>
<td style="text-align: right;">1.8340219</td>
</tr>
<tr class="even">
<td style="text-align: left;">2seater</td>
<td style="text-align: right;">24.80000</td>
<td style="text-align: right;">1.303840</td>
<td style="text-align: right;">15.40000</td>
<td style="text-align: right;">0.5477226</td>
</tr>
<tr class="odd">
<td style="text-align: left;">midsize</td>
<td style="text-align: right;">27.29268</td>
<td style="text-align: right;">2.135930</td>
<td style="text-align: right;">18.75610</td>
<td style="text-align: right;">1.9465416</td>
</tr>
<tr class="even">
<td style="text-align: left;">subcompact</td>
<td style="text-align: right;">28.14286</td>
<td style="text-align: right;">5.375012</td>
<td style="text-align: right;">20.37143</td>
<td style="text-align: right;">4.6023377</td>
</tr>
<tr class="odd">
<td style="text-align: left;">compact</td>
<td style="text-align: right;">28.29787</td>
<td style="text-align: right;">3.781620</td>
<td style="text-align: right;">20.12766</td>
<td style="text-align: right;">3.3854999</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>That’s pretty informative although not totally surprising. Subcompact cars seem to have a high level of variation in their mpg ratings though!</p>
</div>
</div>
</div>
</section>
<section id="transforming-data" class="level3">
<h3 class="anchored" data-anchor-id="transforming-data">Transforming Data</h3>
<p>Often, you may be in a situation where you would like to create new columns, using the existing columns. This can be done using the <code>mutate()</code> command. The syntax is</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>dataset <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">new_column_name =</span> function_of_old_columns)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the <code>mpg</code> dataset, let’s add a column which is the ratio between the city <code>cty</code> and highway <code>hwy</code> gas milages, and use the <code>arrange()</code> function to find cars with the highest city to highway gas milages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mpg_ratio =</span> cty<span class="sc">/</span>hwy) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(manufacturer,model,cty,hwy,mpg_ratio) <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mpg_ratio)) <span class="sc">%&gt;%</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">cty</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">hwy</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">mpg_ratio</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">nissan</td>
<td style="text-align: left;">pathfinder 4wd</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">0.8823529</td>
</tr>
<tr class="even">
<td style="text-align: left;">toyota</td>
<td style="text-align: left;">4runner 4wd</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">0.8823529</td>
</tr>
<tr class="odd">
<td style="text-align: left;">toyota</td>
<td style="text-align: left;">toyota tacoma 4wd</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">0.8823529</td>
</tr>
<tr class="even">
<td style="text-align: left;">honda</td>
<td style="text-align: left;">civic</td>
<td style="text-align: right;">28</td>
<td style="text-align: right;">33</td>
<td style="text-align: right;">0.8484848</td>
</tr>
<tr class="odd">
<td style="text-align: left;">toyota</td>
<td style="text-align: left;">toyota tacoma 4wd</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">18</td>
<td style="text-align: right;">0.8333333</td>
</tr>
<tr class="even">
<td style="text-align: left;">chevrolet</td>
<td style="text-align: left;">k1500 tahoe 4wd</td>
<td style="text-align: right;">14</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">0.8235294</td>
</tr>
</tbody>
</table>


</div>
</div>
<p>One pretty common step in an analysis is to create a categorical column from a variable which was originally numeric. In order to do this we can use the <code>if_else()</code> function. The three arguments of <code>if_else()</code> are a condition, and the values you want to fill if the condition is true or false, respectively.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>mpg <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pre_2000 =</span> <span class="fu">if_else</span>(year <span class="sc">&lt;</span> <span class="dv">2000</span>, <span class="st">"yes"</span>, <span class="st">"no"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(manufacturer,model,year,pre_2000) <span class="sc">%&gt;%</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">%&gt;%</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable_styling</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-hover table-striped caption-top table-sm small" data-quarto-postprocess="true">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">manufacturer</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">model</th>
<th style="text-align: right;" data-quarto-table-cell-role="th">year</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">pre_2000</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">yes</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">yes</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2008</td>
<td style="text-align: left;">no</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">2008</td>
<td style="text-align: left;">no</td>
</tr>
<tr class="odd">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">yes</td>
</tr>
<tr class="even">
<td style="text-align: left;">audi</td>
<td style="text-align: left;">a4</td>
<td style="text-align: right;">1999</td>
<td style="text-align: left;">yes</td>
</tr>
</tbody>
</table>


</div>
</div>
</section>
</section>
<section id="final-thoughts" class="level2">
<h2 class="anchored" data-anchor-id="final-thoughts">Final Thoughts</h2>
<p>There is a lot more to learn about data manipulation and R in general. Sticking to the <code>tidyverse</code> and the other package groups within the <em>tidy</em>-ecosystem (ie. <code>tidytext</code>, <code>tidymodels</code>, etc.) will be beneficial because they are all built on common syntax and programmatic principles. You can read more about this in the <a href="https://tidyverse.tidyverse.org/articles/manifesto.html">TidyTools Manifesto</a>.</p>
<p>You won’t be an expert after working through this document, but it should provide you with a solid start. Please feel free to add your own notes to this markdown file as we encounter more advanced functionality.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>